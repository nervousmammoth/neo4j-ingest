---
**Status:** To Do
**Priority:** P1-MVP (Critical)
**Branch:** `feature/P3.3-drag-drop`
---

## Overview

Connect the Uppy instance with the S3 signing endpoint and finalize the drag-and-drop UI for production use.

---

## User Stories

**As a** user
**I want** to drag and drop files from my file system into the browser
**So that** I can quickly upload multiple files without clicking through file dialogs

**As a** user
**I want** to drag entire folders with subfolders
**So that** I can migrate directory structures from network shares to S3 in one operation

**As a** user
**I want** to see upload progress with pause/resume controls
**So that** I can manage uploads during network interruptions or bandwidth constraints

---

## Requirements

- Configure Uppy to use the `/api/s3/sign` endpoint
- Enable multipart uploads for files > 100MB
- Support recursive folder uploads (browser webkitdirectory)
- Global progress indicator (floating status bar)

---

## Implementation Steps

### Commit 1: `feat: Create UploaderPanel component`

```typescript
// components/uploader-panel.tsx
'use client';

import { useUppy } from '@uppy/react';
import { DragDrop } from '@uppy/react';
import { StatusBar } from '@uppy/react';
import { createUppy } from '@/lib/uppy';

import '@uppy/core/dist/style.min.css';
import '@uppy/drag-drop/dist/style.min.css';
import '@uppy/status-bar/dist/style.min.css';

export function UploaderPanel({ prefix }: { prefix: string }) {
  const uppy = useUppy(() => createUppy(prefix));

  return (
    <div className="flex flex-col gap-4">
      <DragDrop uppy={uppy} />
      <StatusBar uppy={uppy} hideUploadButton={false} />
    </div>
  );
}
```

### Commit 2: `feat: Add folder upload support`

Enable webkitdirectory for recursive folder uploads.

### Commit 3: `feat: Add upload progress to sidebar`

Show global upload progress in sidebar footer.

---

## Acceptance Criteria

- [ ] Dragging a file initiates upload to S3
- [ ] Progress bar works and shows percentage
- [ ] File appears in S3 after upload
- [ ] Recursive folder upload works
- [ ] Pause/Resume/Retry controls work

---

## Dependencies

- P3.1 Uppy Setup
- P3.2 Sign Endpoint

## Blocking

- P3.4 Large Upload Test
